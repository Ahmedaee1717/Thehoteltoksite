<!DOCTYPE html>
<html>
<head>
    <title>Test Compose</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/htm@3.1.1/dist/htm.js"></script>
</head>
<body style="background: #0f1429; margin: 0; padding: 20px; font-family: system-ui;">
    <div id="root"></div>
    <script type="module">
        const { useState, useEffect } = React;
        const html = htm.bind(React.createElement);
        
        function TestApp() {
            const [showCompose, setShowCompose] = useState(false);
            
            function ComposeModal({ onClose }) {
                const [to, setTo] = useState('');
                const [subject, setSubject] = useState('');
                const [body, setBody] = useState('');
                
                console.log('✅ ComposeModal rendering!', {to, subject, body});
                
                return html`
                    <div style=${{
                        position: 'fixed',
                        top: 0,
                        left: 0,
                        right: 0,
                        bottom: 0,
                        background: 'rgba(0, 0, 0, 0.8)',
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        zIndex: 1000
                    }} onClick=${onClose}>
                        <div style=${{
                            background: '#1a1f3a',
                            borderRadius: '24px',
                            padding: '32px',
                            width: '600px',
                            maxWidth: '90%'
                        }} onClick=${(e) => e.stopPropagation()}>
                            <h2 style=${{color: '#C9A962'}}>✍️ Compose Email</h2>
                            
                            <div style=${{marginBottom: '16px'}}>
                                <label style=${{color: 'rgba(255,255,255,0.7)', display: 'block', marginBottom: '8px'}}>To:</label>
                                <input 
                                    type="text"
                                    value=${to}
                                    onChange=${(e) => setTo(e.target.value)}
                                    style=${{
                                        width: '100%',
                                        padding: '12px',
                                        background: 'rgba(255,255,255,0.05)',
                                        border: '1px solid rgba(255,255,255,0.1)',
                                        borderRadius: '8px',
                                        color: 'white',
                                        fontSize: '15px'
                                    }}
                                />
                            </div>
                            
                            <div style=${{marginBottom: '16px'}}>
                                <label style=${{color: 'rgba(255,255,255,0.7)', display: 'block', marginBottom: '8px'}}>Subject:</label>
                                <input 
                                    type="text"
                                    value=${subject}
                                    onChange=${(e) => setSubject(e.target.value)}
                                    style=${{
                                        width: '100%',
                                        padding: '12px',
                                        background: 'rgba(255,255,255,0.05)',
                                        border: '1px solid rgba(255,255,255,0.1)',
                                        borderRadius: '8px',
                                        color: 'white',
                                        fontSize: '15px'
                                    }}
                                />
                            </div>
                            
                            <div style=${{marginBottom: '16px'}}>
                                <label style=${{color: 'rgba(255,255,255,0.7)', display: 'block', marginBottom: '8px'}}>Message:</label>
                                <textarea 
                                    value=${body}
                                    onChange=${(e) => setBody(e.target.value)}
                                    style=${{
                                        width: '100%',
                                        padding: '12px',
                                        background: 'rgba(255,255,255,0.05)',
                                        border: '1px solid rgba(255,255,255,0.1)',
                                        borderRadius: '8px',
                                        color: 'white',
                                        fontSize: '15px',
                                        minHeight: '150px',
                                        resize: 'vertical',
                                        fontFamily: 'inherit'
                                    }}
                                />
                            </div>
                            
                            <div style=${{display: 'flex', gap: '12px', justifyContent: 'flex-end'}}>
                                <button onClick=${onClose} style=${{
                                    padding: '12px 24px',
                                    background: 'rgba(255,255,255,0.05)',
                                    border: '1px solid rgba(255,255,255,0.1)',
                                    borderRadius: '8px',
                                    color: 'white',
                                    cursor: 'pointer',
                                    fontSize: '15px'
                                }}>Cancel</button>
                                <button style=${{
                                    padding: '12px 24px',
                                    background: 'linear-gradient(135deg, #C9A962 0%, #8B7355 100%)',
                                    border: 'none',
                                    borderRadius: '8px',
                                    color: 'white',
                                    cursor: 'pointer',
                                    fontSize: '15px',
                                    fontWeight: '600'
                                }}>Send</button>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            return html`
                <div>
                    <h1 style=${{color: '#C9A962'}}>Test Compose Modal</h1>
                    <button 
                        onClick=${() => setShowCompose(true)}
                        style=${{
                            padding: '16px 32px',
                            background: 'linear-gradient(135deg, #C9A962 0%, #8B7355 100%)',
                            border: 'none',
                            borderRadius: '12px',
                            color: 'white',
                            cursor: 'pointer',
                            fontSize: '16px',
                            fontWeight: '600',
                            boxShadow: '0 4px 16px rgba(201, 169, 98, 0.4)'
                        }}
                    >
                        ✍️ Open Compose Modal
                    </button>
                    
                    ${showCompose && html`<${ComposeModal} onClose=${() => setShowCompose(false)} />`}
                </div>
            `;
        }
        
        ReactDOM.render(html`<${TestApp} />`, document.getElementById('root'));
    </script>
</body>
</html>
